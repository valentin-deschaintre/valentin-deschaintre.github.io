var tramData = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{"stroke":"#da1fff","stroke-width":5,"stroke-opacity":1,"name":"Historic Tram Ride","description":"On Tuesday we will travel from the conference venue to the conference dinner in style!"},"geometry":{"type":"LineString","coordinates":[[14.429790973663332,50.08868995971779],[14.43230152130127,50.089543522551665],[14.43258047103882,50.08735451639957],[14.43228006362915,50.08714800122419],[14.43180799484253,50.085881355349365],[14.431443214416504,50.08555092048555],[14.429211616516115,50.08449075991889],[14.427258968353271,50.08325158148348],[14.426314830780028,50.08261821124548],[14.42481279373169,50.08119998232067],[14.423632621765137,50.08023611347286],[14.42206621170044,50.07918960535285],[14.4195556640625,50.07913452534532],[14.419448375701904,50.077619800339754],[14.418675899505613,50.07381900691845],[14.416401386260986,50.07346094563349],[14.413933753967285,50.07317174033604],[14.413783550262451,50.075526647032994],[14.41429853439331,50.077385702205746],[14.41404104232788,50.07950631416819],[14.41331148147583,50.08062166333753],[14.412925243377684,50.08131013752645],[14.413139820098877,50.082604442234306],[14.413268566131592,50.08407770399985],[14.413847923278809,50.08533062931078],[14.414620399475098,50.08661105760373],[14.415221214294432,50.087602333435456],[14.415585994720459,50.08870372698091],[14.414684772491455,50.08886893382965],[14.414341449737549,50.08919934581871],[14.410264492034912,50.09002536582528],[14.409062862396238,50.092737364734226],[14.408547878265379,50.092888791621164],[14.406745433807371,50.092751130834635],[14.406294822692871,50.0927924291121],[14.406101703643797,50.092930089780005],[14.40631628036499,50.09308151605796],[14.406638145446777,50.09315034602611],[14.40908432006836,50.09348072849695],[14.409320354461672,50.09370098221204],[14.409427642822266,50.09399006367668],[14.409513473510742,50.094389268546436],[14.409255981445312,50.09474717353311],[14.408504962921143,50.0948848285854],[14.407753944396974,50.09484353211123],[14.406981468200684,50.09462328364795],[14.398505687713623,50.093301771608],[14.396724700927733,50.093549557891684],[14.389879703521729,50.092847493426724],[14.389150142669676,50.092668534172866],[14.388978481292725,50.09222801623904],[14.388678073883055,50.09060357135877],[14.387948513031006,50.08930948264218],[14.387969970703125,50.08871749424006],[14.388206005096436,50.087395819327874]]}},{"type":"Feature","properties":{"marker-color":"#7e7e7e","marker-size":"medium","marker-symbol":"rail-above","name":"Meeting Point","description":"Tuesday 18:20. Trams leave 18:30 sharp! "},"geometry":{"type":"Point","coordinates":[14.429689049720762,50.08866242517972]}},{"type":"Feature","properties":{"stroke":"#a88400","stroke-width":5,"stroke-opacity":1,"name":"Line 15","description":"Náměstí Republiky to Malostranské náměstí. Leaves :01, :11, :21, :31, :41, :51 or check the <a href=\"https://www.dpp.cz/en/current-departures?cis=47133&ds=N%C3%A1m%C4%9Bst%C3%AD%20Republiky\">live departures</a> for 15 (on platform B)."},"geometry":{"type":"LineString","coordinates":[[14.429619312286379,50.08864865790474],[14.428954124450682,50.088345776854915],[14.428610801696776,50.08837331157491],[14.428460597991942,50.08853851956265],[14.428074359893799,50.08968119255277],[14.427666664123535,50.09130566869929],[14.427194595336914,50.093246707815396],[14.426722526550291,50.09524272987051],[14.426572322845457,50.09538038349911],[14.426357746124268,50.095394148840235],[14.42528486251831,50.09528402600062],[14.424426555633543,50.09527026062789],[14.42354679107666,50.09485729760657],[14.420156478881834,50.09447186224217],[14.417860507965086,50.09410018949019],[14.416272640228271,50.09386617183398],[14.413955211639404,50.093301771608],[14.412581920623778,50.092847493426724],[14.411144256591797,50.09207658726401],[14.410243034362793,50.0914020341981],[14.409899711608887,50.091236836081485],[14.409856796264648,50.091057870812485],[14.409964084625242,50.09071370495512],[14.410092830657959,50.090314469464026],[14.410157203674316,50.09003913270477],[14.409856796264648,50.090011598941835],[14.408054351806639,50.09002536582528],[14.40730333328247,50.08946092036117],[14.406895637512207,50.08903414010894],[14.40650939941406,50.08870372698091],[14.406101703643797,50.08859358876535],[14.405136108398438,50.08853851956265],[14.40483570098877,50.08844214830566],[14.40457820892334,50.088387078928946],[14.40455675125122,50.08811173109627]]}}]};
var areaData = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{"stroke":"#35d5fd","stroke-width":2,"stroke-opacity":1,"fill":"#07608d","fill-opacity":0.5,"name":"Vinohrady (Wineyards)","description":"Lots of cafes, bars and restaurants in a hip living area."},"geometry":{"type":"Polygon","coordinates":[[[14.435005187988278,50.07602240212705],[14.435563087463375,50.07441117932996],[14.436593055725092,50.074603978071856],[14.43944692611694,50.07094066941362],[14.442622661590574,50.069797549652115],[14.444360733032223,50.070844262774926],[14.44697856903076,50.07008677529916],[14.448609352111815,50.06906759145322],[14.451313018798826,50.07041731675997],[14.450111389160156,50.07129874951744],[14.450840950012207,50.07194604138151],[14.447879791259764,50.07200112964733],[14.447793960571287,50.0752512253214],[14.461677074432371,50.07558173118547],[14.461097717285151,50.077729963772],[14.459552764892576,50.08252182808429],[14.456377029418942,50.08235659935715],[14.448480606079098,50.078996825049614],[14.445133209228512,50.07866634272622],[14.441871643066401,50.0785011007103],[14.437322616577145,50.079327305094836],[14.436206817626951,50.0780053712452],[14.435005187988278,50.07602240212705]]]}},{"type":"Feature","properties":{"stroke":"#fe8181","stroke-width":2,"stroke-opacity":1,"fill":"#d81818","fill-opacity":0.5,"name":"Old Town","description":"Touristy area with high prices. Beware of the tourist traps."},"geometry":{"type":"Polygon","coordinates":[[[14.413890838623045,50.073254370599024],[14.418654441833496,50.07380523538],[14.4189977645874,50.07581583812746],[14.429082870483398,50.075540418077054],[14.429297447204592,50.077220455775915],[14.42981243133545,50.07914829535313],[14.432559013366697,50.08242544472934],[14.43174362182617,50.082783439070894],[14.435563087463379,50.08724437508343],[14.43247318267822,50.087299445773134],[14.432430267333984,50.08848345029667],[14.436807632446289,50.08870372698091],[14.437623023986816,50.08986016296294],[14.436764717102049,50.093797342894035],[14.42732334136963,50.09327423971961],[14.421701431274412,50.09313658004037],[14.417581558227539,50.09214541867562],[14.414963722229002,50.09071370495512],[14.414148330688475,50.0891718115733],[14.413762092590332,50.08818056820275],[14.414148330688475,50.08608787598246],[14.413118362426758,50.08286605277003],[14.413075447082518,50.08140652312387],[14.414019584655762,50.07912075533354],[14.414362907409668,50.07716537350608],[14.413719177246094,50.075540418077054],[14.413890838623045,50.073254370599024]]]}},{"type":"Feature","properties":{"stroke":"#cdd105","stroke-width":2,"stroke-opacity":1,"fill":"#f0ff1a","fill-opacity":0.5,"name":"Karlin","description":"Go-out area with lots of restaurants and bars in between older houses. Surrounded by modern office buildings and many companies."},"geometry":{"type":"Polygon","coordinates":[[[14.442000389099121,50.09276489693108],[14.443266391754152,50.089791328268895],[14.443963766098022,50.0894058521551],[14.444800615310667,50.0892544142621],[14.44557309150696,50.08935078388573],[14.456999301910402,50.09181502699819],[14.457074403762816,50.09222801623904],[14.45523977279663,50.09571075059426],[14.442000389099121,50.09276489693108]]]}},{"type":"Feature","properties":{"stroke":"#a455aa","stroke-width":2,"stroke-opacity":1,"fill-opacity":0.5,"fill":"#dfafdb","name":"Pankrác","description":"Location of the high-rise buildings you see in the south."},"geometry":{"type":"Polygon","coordinates":[[[14.43923234939575,50.05204126444642],[14.434039592742918,50.050704800205196],[14.434854984283445,50.04883093199633],[14.439833164215088,50.04833489581159],[14.441163539886475,50.05005722167119],[14.43923234939575,50.05204126444642]]]}},{"type":"Feature","properties":{"stroke":"#c3186b","stroke-width":2,"stroke-opacity":1,"fill":"#ff1a94","fill-opacity":0.5,"name":"Letná","description":"Hip creative living area with small shops, bars and restaurants. Enclosed by two big parks: Letná park and Stromovka in the north."},"geometry":{"type":"Polygon","coordinates":[[[14.420328140258787,50.10293696089737],[14.421744346618652,50.09963368571821],[14.407796859741211,50.097513964172684],[14.409642219543459,50.09390746915046],[14.412775039672852,50.093797342894035],[14.42629337310791,50.09605488056283],[14.430713653564453,50.09668807324708],[14.43273067474365,50.09726619838984],[14.43303108215332,50.09891794607345],[14.433245658874512,50.100487053627056],[14.43273067474365,50.10189094840164],[14.43127155303955,50.10379026996356],[14.426078796386717,50.10277180254812],[14.420328140258787,50.10293696089737]]]}},{"type":"Feature","properties":{"stroke":"#025fb6","stroke-width":2,"stroke-opacity":1,"fill":"#86abf3","fill-opacity":0.5,"name":"Holešovice","description":"Up and coming former industrial area. Hipster territory that is being developed with new buildings. Separated into two halves by a huge dead-spot in the center."},"geometry":{"type":"Polygon","coordinates":[[[14.431872367858887,50.104230681598644],[14.433202743530273,50.10213869026748],[14.433460235595701,50.10032188683107],[14.432945251464844,50.09679819285972],[14.436635971069336,50.097651611276184],[14.44002628326416,50.098422427747664],[14.44328784942627,50.098422427747664],[14.449639320373535,50.09858760109239],[14.452686309814453,50.099716270373776],[14.45577621459961,50.101175242480934],[14.455819129943846,50.10379026996356],[14.455947875976562,50.10538674287487],[14.444661140441893,50.10965291799656],[14.443588256835936,50.10979053022197],[14.4374942779541,50.10907494233178],[14.436249732971191,50.10701068658692],[14.431872367858887,50.104230681598644]]]}},{"type":"Feature","properties":{"stroke":"#23be04","stroke-width":2,"stroke-opacity":1,"fill":"#63f42f","fill-opacity":0.5,"name":"Malá Strana / Lesser town","description":"Smaller medieval part of town underneath the castle, connected with Charles Bridge to the old town. Home to the computer science building of Charles University, many government buildings and foreign embassies."},"geometry":{"type":"Polygon","coordinates":[[[14.395995140075685,50.088345776854915],[14.397668838500977,50.08694148515897],[14.402174949645996,50.08716176893022],[14.403033256530762,50.08539947041166],[14.404406547546387,50.08187467898333],[14.408054351806639,50.082094986041085],[14.408783912658691,50.08435307500804],[14.409899711608887,50.08738205168907],[14.41054344177246,50.08771247392898],[14.41157341003418,50.089750027405],[14.409813880920412,50.09162229746775],[14.40329074859619,50.08966742557045],[14.395995140075685,50.088345776854915]]]}}]};
var craftbeerData = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{"marker-color":"blue","marker-size":"medium","marker-symbol":"beer","name":"Bad Flash Karlin","description":"12 taps, own brewery","website":"http://www.badflash.cz/nase-podniky/bad-flash-bar-karlin/"},"geometry":{"type":"Point","coordinates":[14.45617,50.0938417]}},{"type":"Feature","properties":{"marker-color":"blue","marker-size":"medium","marker-symbol":"beer","name":"Bad Flash Krymska","description":"12 taps, own brewery","website":"https://www.badflash.cz/nase-podniky/bad-flash-bar-krymska/"},"geometry":{"type":"Point","coordinates":[14.4471608,50.0715675]}},{"type":"Feature","properties":{"marker-color":"blue","marker-size":"medium","marker-symbol":"beer","name":"Beer Geek","description":"32 taps","website":"https://beergeek.cz/en/"},"geometry":{"type":"Point","coordinates":[14.449969232082369,50.07707070070694]}},{"type":"Feature","properties":{"marker-color":"blue","marker-size":"medium","marker-symbol":"beer","name":"Vinohradský pivovar (Wineyard brewery)","description":"Beer pub with their own beer, brewed in the tanks right next to the people.","website":"https://www.vinohradskypivovar.cz/en"},"geometry":{"type":"Point","coordinates":[14.45714145898819,50.075326966449815]}},{"type":"Feature","properties":{"marker-color":"blue","marker-size":"medium","marker-symbol":"beer","name":"U Tří růží","description":"Local brewery pub","website":"https://www.u3r.cz/en/"},"geometry":{"type":"Point","coordinates":[14.41831648349762,50.085581898850805]}}]};
var beergardenData = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{"marker-color":"cadetblue","marker-size":"medium","marker-symbol":"beer","name":"Letna Beer Garden","description":"Self-service beer garden underneath trees. Serve fast food and drinks, also to the park.","website":"http://www.letenskyzamecek.cz/en"},"geometry":{"type":"Point","coordinates":[14.4251442,50.0961075]}},{"type":"Feature","properties":{"marker-color":"cadetblue","marker-size":"medium","marker-symbol":"beer","name":"Riegrovy Sady Gardens","description":"Self-service beer garden with a beautiful view on old town and the castle. Serve food and beer also to the park.","website":"https://www.parkriegrovysady.cz/en/front/"},"geometry":{"type":"Point","coordinates":[14.442729949951172,50.0804633128755]}}]};
var cocktailbarData = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{"marker-color":"darkgreen","marker-size":"medium","marker-symbol":"bar","name":"Tiki Taky","description":"Tropical cocktail bar","website":"http://www.tikitaky.cz/"},"geometry":{"type":"Point","coordinates":[14.451256692409514,50.08621867192316]}},{"type":"Feature","properties":{"marker-color":"darkgreen","marker-size":"medium","marker-symbol":"bar","name":"Bukowski's Bar","description":"Dark classy cocktail bar."},"geometry":{"type":"Point","coordinates":[14.448598623275755,50.083051933072525]}},{"type":"Feature","properties":{"marker-color":"darkgreen","marker-size":"medium","marker-symbol":"bar","name":"Puerto","description":"Modern cocktail bar with few street-side seatings.","website":"https://www.facebook.com/puertoricobar.puertorico/"},"geometry":{"type":"Point","coordinates":[14.452385902404783,50.076394215083795]}},{"type":"Feature","properties":{"marker-color":"darkgreen","marker-size":"medium","marker-symbol":"bar","name":"Bullerbyn","description":"Alternative restaurant and cocktail bar.","website":"https://www.bullerbyn.cz/"},"geometry":{"type":"Point","coordinates":[14.445621371269226,50.0745764354419]}},{"type":"Feature","properties":{"marker-color":"darkgreen","marker-size":"medium","marker-symbol":"bar","name":"Cobra","description":"Super popular restaurant and cocktail bar.","website":"http://www.barcobra.cz/"},"geometry":{"type":"Point","coordinates":[14.432119131088257,50.09921043712416]}},{"type":"Feature","properties":{"marker-color":"darkgreen","marker-size":"medium","marker-symbol":"bar","name":"Bio OKO","description":"Alternative cinema and cocktail bar. 70's concrete charm.","website":"http://www.biooko.net/"},"geometry":{"type":"Point","coordinates":[14.430147707462309,50.0999003648227]}},{"type":"Feature","properties":{"marker-color":"darkgreen","marker-size":"medium","marker-symbol":"bar","name":"Elbow Room","description":"Super hidden, small cocktail bar (sister-bar to Bukowski's). Cash only.","website":"http://www.facebook.com/elbowroomletna"},"geometry":{"type":"Point","coordinates":[14.426285326480864,50.10101695991999]}},{"type":"Feature","properties":{"marker-size":"medium","marker-symbol":"bar","name":"Café Bar Pilotů","description":"Lokal cocktail bar attached to an alternative cinema","website":"https://www.facebook.com/cafebarpilotu/","marker-color":"darkgreen"},"geometry":{"type":"Point","coordinates":[14.446887373924257,50.07135039546562]}},{"type":"Feature","properties":{"marker-size":"medium","marker-symbol":"bar","name":"Bugsy's Bar","description":"Exclusive cocktail bar. $$$","website":"https://www.bugsysbar.cz/","marker-color":"darkgreen"},"geometry":{"type":"Point","coordinates":[14.420067965984344,50.08898595500296]}},{"type":"Feature","properties":{"marker-color":"darkgreen","marker-size":"medium","marker-symbol":"bar","name":"Black Angel's Bar","description":"Exclusive underground cocktail bar. $$$","website":"http://www.blackangelsbar.com/"},"geometry":{"type":"Point","coordinates":[14.420046508312227,50.086476820758726]}},{"type":"Feature","properties":{"marker-color":"darkgreen","marker-size":"medium","marker-symbol":"bar","name":"Hemmingway Bar","description":"Exclusive cocktail bar. $$$","website":"http://www.hemingwaybar.eu/"},"geometry":{"type":"Point","coordinates":[14.414319992065428,50.08400713992439]}}]};
var outdoorbarsData = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{"marker-color":"green","marker-size":"medium","marker-symbol":"bar","name":"VILA Štvanice","description":"Local theater serving drinks to the park. Surrounded by a BMX pumptrack and the river."},"geometry":{"type":"Point","coordinates":[14.43604588508606,50.095635041669496]}},{"type":"Feature","properties":{"marker-color":"green","marker-size":"medium","marker-symbol":"bar","name":"Kasárna Karlín","description":"Creative hub in an abandoned military housing. Includes a bar, ateliers, (outdoor) cinema etc.","website":"https://www.kasarnakarlin.cz/en/program/courtyard"},"geometry":{"type":"Point","coordinates":[14.443416595458983,50.089825745628254]}},{"type":"Feature","properties":{"marker-color":"green","marker-size":"medium","marker-symbol":"bar","name":"Přístav 18600","description":"Outdoor bar, cinema, theater and sports area along the river.","website":"https://18600.cz/komunita/"},"geometry":{"type":"Point","coordinates":[14.447895884513855,50.09599981993394]}},{"type":"Feature","properties":{"marker-color":"green","marker-size":"medium","marker-symbol":"bar","name":"Mlýnská kavárna","description":"Café / bar serving drinks also to the park.","website":"https://www.facebook.com/kavarna.mlynska"},"geometry":{"type":"Point","coordinates":[14.40685272216797,50.082607884487466]}},{"type":"Feature","properties":{"marker-color":"green","marker-size":"medium","marker-symbol":"bar","name":"Stage bar","description":"Outdoor music stage with multiple bars around serving drinks to the park.","website":""},"geometry":{"type":"Point","coordinates":[14.409996271133423,50.08156487047035]}},{"type":"Feature","properties":{"marker-color":"green","marker-size":"large","marker-symbol":"bar","name":"Pražský metronom / Stalin","description":"MUST SEE VIEW! Underground bar at the old Stalin statue, outdoor music on weekends. Surrounded by skaters.","website":"https://www.stalinletna.cz/"},"geometry":{"type":"Point","coordinates":[14.415961503982542,50.09475405629514]}},{"type":"Feature","properties":{"marker-color":"green","marker-size":"medium","marker-symbol":"bar","name":"DŽUNGLE BKAO","website":"https://www.facebook.com/dzunglebkao","description":"Hip outdoor bar next to an circus tent serving drinks to the park."},"geometry":{"type":"Point","coordinates":[14.423729181289673,50.109646037374915]}},{"type":"Feature","properties":{"marker-color":"green","marker-size":"medium","marker-symbol":"bar","name":"Cross Club","description":"Steam-punk culture center with night club, outdoor bar, restaurant, summer cinema and courtyard.","website":"https://www.crossclub.cz/en/contact/"},"geometry":{"type":"Point","coordinates":[14.443180561065672,50.10824581029897]}},{"type":"Feature","properties":{"stroke":"green","stroke-width":5,"stroke-opacity":1,"fill":"#3e952d","fill-opacity":0.5,"name":"Náplavka","description":"River-side pier with many boat bars, restaurants and other cultural activities. Perfect for a sunset walk."},"geometry":{"type":"Polygon","coordinates":[[[14.413182735443117,50.07560927323797],[14.4135046005249,50.07317174033604],[14.413762092590332,50.07074785594255],[14.414341449737549,50.0673046277208],[14.415028095245361,50.06507328383611],[14.415371417999266,50.065128379996736],[14.414727687835692,50.06731840112611],[14.414105415344238,50.07076162835903],[14.413826465606688,50.07314419688341],[14.413826465606688,50.07560927323797],[14.413182735443117,50.07560927323797]]]}},{"type":"Feature","properties":{"stroke":"green","stroke-width":5,"stroke-opacity":1,"fill":"#3e952d","fill-opacity":0.5,"name":"Náplavka Smíchov","description":"Less touristy river-side pier with many boat bars, restaurants and other cultural activities. Perfect for a sunset walk.","website":""},"geometry":{"type":"Polygon","coordinates":[[[14.41077947616577,50.0709406694136],[14.410951137542723,50.07022450118469],[14.411487579345703,50.06832384903131],[14.411187171936033,50.06799329314162],[14.411423206329344,50.06702915878372],[14.411745071411133,50.06680878249494],[14.412152767181396,50.06690519724588],[14.411873817443848,50.06711179963098],[14.411723613739014,50.06797951993012],[14.41202402114868,50.06824121027248],[14.411251544952393,50.07100953117969],[14.41077947616577,50.0709406694136]]]}}]};
var pubchainData = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{"marker-color":"#7e7e7e","marker-size":"medium","marker-symbol":"restaurant","name":"Potrefená Husa Platnéřská","website":"https://staropramen.cz/hospody/restaurace-praha-platnerska"},"geometry":{"type":"Point","coordinates":[14.415690600872042,50.087325260137185]}},{"type":"Feature","properties":{"marker-color":"#7e7e7e","marker-size":"medium","marker-symbol":"restaurant","name":"Potrefená husa Národní třída","website":"https://staropramen.cz/hospody/restaurace-praha-narodni-trida"},"geometry":{"type":"Point","coordinates":[14.420958459377289,50.08291596514427]}},{"type":"Feature","properties":{"marker-color":"#7e7e7e","marker-size":"medium","marker-symbol":"restaurant","name":"Potrefená Husa Hybernská","website":"http://potrefena-husa.eu/en"},"geometry":{"type":"Point","coordinates":[14.43211108446121,50.087112721459384]}},{"type":"Feature","properties":{"marker-color":"#7e7e7e","marker-size":"medium","marker-symbol":"restaurant","name":"Kozlovna Apropos","website":"https://www.kozlovna-apropos.cz/en/"},"geometry":{"type":"Point","coordinates":[14.415269494056702,50.0873063296049]}},{"type":"Feature","properties":{"marker-color":"#7e7e7e","marker-size":"medium","marker-symbol":"restaurant","name":"Kozlovna U Paukerta","website":"https://www.kozlovna.cz/u-paukerta"},"geometry":{"type":"Point","coordinates":[14.417114853858946,50.081953851948775]}},{"type":"Feature","properties":{"marker-color":"#7e7e7e","marker-size":"medium","marker-symbol":"restaurant","name":"Kozlovna Tylák","website":"https://kozlovnatylak.cz/"},"geometry":{"type":"Point","coordinates":[14.43273067474365,50.07488973192409]}},{"type":"Feature","properties":{"marker-color":"#7e7e7e","marker-size":"medium","marker-symbol":"restaurant","name":"Lokál U Bílé kuželky","website":"https://lokal-ubilekuzelky.ambi.cz/en/"},"geometry":{"type":"Point","coordinates":[14.407493770122528,50.08766772938401]}},{"type":"Feature","properties":{"marker-color":"#7e7e7e","marker-size":"medium","marker-symbol":"restaurant","name":"Lokál Dlouhááá","website":"https://lokal-dlouha.ambi.cz/en/"},"geometry":{"type":"Point","coordinates":[14.425748884677887,50.09070510077702]}},{"type":"Feature","properties":{"marker-color":"#7e7e7e","marker-size":"medium","marker-symbol":"restaurant","name":"Lokál U Jiráta","website":"https://www.ujirata.lokal.cz/en/"},"geometry":{"type":"Point","coordinates":[14.424016177654266,50.08035487693128]}},{"type":"Feature","properties":{"marker-color":"#7e7e7e","marker-size":"medium","marker-symbol":"restaurant","name":"Lokál Hamburk","website":"https://lokal-hamburk.ambi.cz/en/"},"geometry":{"type":"Point","coordinates":[14.446659386157988,50.093140021537174]}}]};
var pubsData = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{"marker-color":"#7e7e7e","marker-size":"medium","marker-symbol":"restaurant","name":"Malostranská Beseda","description":"Three floored pub, restaurant and culture club.","website":"https://www.malostranska-beseda.cz/restaurant/about"},"geometry":{"type":"Point","coordinates":[14.404798150062563,50.08839396260451]}},{"type":"Feature","properties":{"marker-color":"#7e7e7e","marker-size":"medium","marker-symbol":"restaurant","name":"Holešovická Sedma","description":"Modern Pilsner pub with two floors. Very popular.","website":"https://www.holesovickasedma.cz/"},"geometry":{"type":"Point","coordinates":[14.433154463768007,50.100390706398606]}},{"type":"Feature","properties":{"marker-color":"#7e7e7e","marker-size":"medium","marker-symbol":"restaurant","name":"Mincovna","description":"Local pub with reasonably priced lunch menu.","website":"https://www.restauracemincovna.cz/en/"},"geometry":{"type":"Point","coordinates":[14.421266913414001,50.088335451330835]}}]};

var offProg = L.layerGroup();
var venue = L.marker([50.0870947, 14.4241550]).bindPopup('Conference Venue').addTo(offProg);
/* venue.bindTooltip("Conference Venue", {
permanent: true
}).openTooltip(); */
var reception = L.marker([50.0884389, 14.4037367]).bindPopup('Cheese+Wine Monday 7pm/19:00').addTo(offProg);
var dinner = L.marker([50.0868797, 14.3885033]).bindPopup('Conference Reception Tuesday 7:30pm/19:30').addTo(offProg);



var mapyAttr = 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery &copy; <a href="https://o.seznam.cz" target="_blank" rel="noopener">Seznam.cz, a.s.</a>';
var mapyUrl = 'https://mapserver.mapy.cz/{id}/{z}-{x}-{y}?sdk=HgUbCgUbGkgqAQkYBxYEHQNHQlJeRlxaQlNdQA%3D%3D';

var mapyBase = L.tileLayer(mapyUrl, {
id: 'base-en',
tileSize: 256,
zoomOffset: 0,
attribution: mapyAttr
});
//var mapySat = L.tileLayer(mapyUrl, {id: 'hybrid-base-en', tileSize: 256, zoomOffset: 0, attribution: mapyAttr});

var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
maxZoom: 19,
attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
});

var map = L.map('map', {
center: [50.0870947, 14.4241550],
zoom: 14,
layers: [mapyBase, offProg],
minZoom: 11,
maxBounds: [
    [50.1320717, 14.3200892],
    [50.0276417, 14.5744914]
]
});

function genPopup(layer) {
var str = "<h4>" + layer.feature.properties.name + "</h4>"
if (layer.feature.properties.description){
    str += layer.feature.properties.description + '<br/>';
}
if(layer.feature.geometry.type == 'Point'){
    var c = layer.feature.geometry.coordinates;
    var geoString = c[1].toString()+','+c[0].toString();
    str += '<a href="geo:'+geoString+'">Navigate in App</a><br/><a href="//google.com/maps/place/'+geoString+'">Google Maps</a>';
    if (layer.feature.properties.website){
        str +=  '<br/><a href="' +layer.feature.properties.website+'">Website</a>';
    }
}
return str;
}

var iconMapping = {
    'bar' : 'fa-martini-glass',
'beer' : 'fa-beer-mug-empty',
'restaurant' : 'fa-utensils',
'rail-above' : 'fa-users-rays'
}

var geoJsonOptions = {
'style': function(feature) {
    return {
    color: feature.properties.stroke,
    fillColor: feature.properties.fill,
    weight: feature.properties["stroke-width"]
    };
},
'pointToLayer' : function(p, latlng) {
    return L.marker(latlng, {
        'title' : p.properties.name,
    'icon' : L.AwesomeMarkers.icon({
        icon: iconMapping[p.properties["marker-symbol"]] + ' ' + p.properties["marker-size"],
        markerColor: p.properties["marker-color"],
        prefix: 'fa',
    }),
    });
}
}

var tramride = L.geoJson(tramData, geoJsonOptions).bindPopup(genPopup).addTo(offProg);
var areas = L.geoJson(areaData, geoJsonOptions).bindPopup(genPopup);
var craftBeer = L.geoJSON(craftbeerData, geoJsonOptions).bindPopup(genPopup);
var beerGarden = L.geoJSON(beergardenData, geoJsonOptions).bindPopup(genPopup);
var cocktailbar = L.geoJSON(cocktailbarData, geoJsonOptions).bindPopup(genPopup);
var outdoorbars = L.geoJSON(outdoorbarsData, geoJsonOptions).bindPopup(genPopup);
var pubchain = L.geoJSON(pubchainData, geoJsonOptions).bindPopup(genPopup);
var pubs = L.geoJSON(pubsData, geoJsonOptions).bindPopup(genPopup);

var baseLayers = {
'OpenStreetMap': osm,
'Mapy.cz': mapyBase,
//'Satellite': mapySat,
};

var overlays = {
'<i class="fa-solid fa-graduation-cap"></i> Official Program': offProg,
'<i class="fa-solid fa-earth-europe"></i> Area Descriptions': areas,
'<i class="fa-solid fa-beer-mug-empty"></i> Craft Beer': craftBeer,
'<i class="fa-solid fa-tree-city"></i> Beer Gardens': beerGarden,
'<i class="fa-solid fa-martini-glass"></i> Cocktail Bars': cocktailbar,
'<i class="fa-solid fa-martini-glass"></i> Hip Outdoor Bars': outdoorbars,
'<i class="fa-solid fa-utensils"></i> Pub Chains <i class="fa-solid fa-beer-mug-empty"></i>': pubchain,
'<i class="fa-solid fa-utensils"></i> Local Pubs <i class="fa-solid fa-beer-mug-empty"></i>': pubs,
};

var layerControl = L.control.layers(baseLayers, overlays).addTo(map).expand();
L.control.scale().addTo(map);

var info = L.control({position:'bottomleft'});

window.posMarker = null;
window.posCircle = null;

window.locateMe = function(){
    if(window.posMarker){
    map.removeLayer(window.posMarker);
    map.removeLayer(window.posCircle);
    }
    map.locate({setView: true, maxZoom: 16});
}

function onLocationFound(e) {
    var radius = Math.round((e.accuracy + Number.EPSILON) * 10) / 10;

    window.posMarker = L.marker(e.latlng).addTo(map)
        .bindPopup("You are within " + radius + " meters from this point").openPopup();

    window.posCircle = L.circle(e.latlng, radius).addTo(map);
    info.update();
}

map.on('locationfound', onLocationFound);

function onLocationError(e) {
    alert(e.message);
}

map.on('locationerror', onLocationError);

info.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
    this.update();
    return this._div;
};

// method that we will use to update the control based on feature properties passed
info.update = function (props) {
    var content = '';        
    content += '<a href="javascript:window.locateMe();"><i class="fa-solid fa-location-crosshairs"></i> '+(window.posMarker?'Update m':'M')+'y location</a>';
    
    this._div.innerHTML = content;
};

info.addTo(map);
venue.openPopup();
